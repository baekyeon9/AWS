### AWS Lambda 

0.1초 동안 컴퓨터를 빌려보자!



**[Lambda의 정의와 특징]**

Lambda함수에 코드를 구성한다. 

Lambda는 필요 시에만 함수를 실행하며, 일일 몇 개의 요청에서 초당 수천 개의 요청까지 자동으로 확장이 가능하다.

사용한 컴퓨팅 시간만큼만 비용을 지불하고, 코드가 실행되지 않을 때는 요금이 부과되지 않는다.



**[Lambda의 생성]**

* EC2 - 컴퓨터 1대를 인스턴스,

* S3 - 버킷

* Lambda? 함수라고 한다!



**[함수 생성]**

* 블루프린트 사용 (샘플 코드)
* 새로 작성
  * 기본정보
    * 함수이름 
    * 런타임 (어떤 언어로 작성할 것인지 선택)
    * 함수 생성



**[함수 코드]**

* Lambda_handler (Default) - 약속된 이름
  * Lambda를 실행했을 때 이 함수가 실행되도록 약속 되어 있다.
  * 이 함수는 event, context 두 개의 파라미터를 받도록 약속되어 있다
* Save
* Deploy



**[함수 실행]**

* 방법 : 클라우드 콘솔/ cmd line /Trigger(다른 서비스에서 어떤 변화가 생겼을 때 실행)

* 클라우드 콘솔

  * 테스트 이벤트 선택

  * 테스트 이벤트 구성 

  * 이벤트 이름 작성 / {} / run

  * 테스트 [button]

  * 실행결과 (성공 / 실패)

    * 세부정보 
      * 함수의 return값
      * 실행 기간 (소요된 시간)
      * 청구 기간
      * 로그 출력 (history)

    

* 입력값에 따라서 다른 출력값을 갖게 하자!
  * 테스트 이벤트 구성 
  * 새로운 테스트 이벤트 생성
  * 이벤트 이름 작성 / 함수 입력/ 생성
  * Deploy
  * 테스트 [button]



**[디버깅]**

* 모니터링
* CloudWatch에서 로그 보기
* 로그 그룹
  * 로그 스트림 (상위가 가장 최신)
    * 로그 이벤트 (직전에 실행했던 로그들 목록)



**[Trigger]**

* AWS의 다른 서비스들을 실행 했을 때 Lambda가 실행되도록 할 수 있다.



**[Trigger+ S3(파일 서버  SVC)]**

* S3 버킷 (폴더)안에 파일을 업로드 했을 때 Lambda 가 실행되면서, 업로드한 파일 이름을 알아내는 방법
  * 버킷 : Trigger안에 S3 버킷 지정
  * 이벤트 유형 : 모든 객체 생성 이벤트
  * 재귀함수 [체크] 
  * 추가 [button]
* 이름을 알아내는 Lambda 함수 작성



**[성능과 가격정책]**

* 기본 설정 편집

  * 메모리 (메모리에 비례해서 CPU 성능이 달라진다.)

  * 가격정책 

    1. 함수가 몇 번 요청 되는지?

    2. 컴퓨터가 얼마나 사용되는지? (기간)
